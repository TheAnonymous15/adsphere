# AdSphere Moderation Service - Environment Configuration
# Copy this to .env and customize for your environment

#############################################
# SERVICE CONFIGURATION
#############################################
APP_NAME=AdSphere Moderation Service
VERSION=1.0.0
DEBUG=false
LOG_LEVEL=INFO
ENVIRONMENT=production  # development/staging/production

#############################################
# REDIS CONFIGURATION
#############################################
REDIS_URL=redis://redis:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

#############################################
# JOB PROCESSING
#############################################
JOB_TIMEOUT=300
MAX_CONCURRENT_JOBS=10
WORKER_COUNT=4
BATCH_SIZE=1
BLOCK_MS=5000

#############################################
# VIDEO PROCESSING
#############################################
MAX_VIDEO_SIZE_MB=100
MAX_VIDEO_DURATION_SEC=60
FRAME_SAMPLE_FPS=2.0
MAX_FRAMES_PER_VIDEO=150

#############################################
# MODEL PATHS
#############################################
MODELS_DIR=./models_weights
YOLO_VIOLENCE_MODEL=yolov8n-violence.pt
YOLO_WEAPONS_MODEL=yolov8n-weapons.pt
BLOOD_MODEL=blood_cnn.pth

#############################################
# GPU CONFIGURATION
#############################################
GPU_ENABLED=false
CUDA_DEVICE=0
TORCH_CUDA_DEVICE_COUNT=1

#############################################
# MODERATION THRESHOLDS (0.0-1.0)
#############################################
# Nudity
THRESHOLD_NUDITY_APPROVE=0.2
THRESHOLD_NUDITY_REVIEW=0.4
THRESHOLD_NUDITY_REJECT=0.6

# Sexual Content
THRESHOLD_SEXUAL_APPROVE=0.15
THRESHOLD_SEXUAL_REVIEW=0.3
THRESHOLD_SEXUAL_REJECT=0.5

# Violence
THRESHOLD_VIOLENCE_APPROVE=0.2
THRESHOLD_VIOLENCE_REVIEW=0.4
THRESHOLD_VIOLENCE_REJECT=0.6

# Weapons
THRESHOLD_WEAPONS_APPROVE=0.1
THRESHOLD_WEAPONS_REVIEW=0.3
THRESHOLD_WEAPONS_REJECT=0.5

# Blood/Gore
THRESHOLD_BLOOD_APPROVE=0.1
THRESHOLD_BLOOD_REVIEW=0.3
THRESHOLD_BLOOD_REJECT=0.5

# Hate Speech
THRESHOLD_HATE_APPROVE=0.1
THRESHOLD_HATE_REVIEW=0.3
THRESHOLD_HATE_REJECT=0.5

# Self Harm
THRESHOLD_SELF_HARM_APPROVE=0.05
THRESHOLD_SELF_HARM_REVIEW=0.15
THRESHOLD_SELF_HARM_REJECT=0.3

#############################################
# LOGGING
#############################################
LOG_DIR=./logs
AUDIT_LOG_DIR=./logs/audit
LOG_ROTATION_SIZE_MB=10
LOG_BACKUP_COUNT=10
AUDIT_RETENTION_DAYS=365

#############################################
# CACHE
#############################################
CACHE_DIR=./cache
CACHE_TTL_SECONDS=3600
CACHE_ENABLED=true
FINGERPRINT_CACHE_SIZE=10000

#############################################
# API AUTHENTICATION (Optional)
#############################################
API_KEY=
API_KEY_HEADER=X-API-Key
ENABLE_API_AUTH=false

#############################################
# RATE LIMITING
#############################################
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

#############################################
# CORS
#############################################
CORS_ALLOWED_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=*

#############################################
# DETECTOR MODELS
#############################################
# Detoxify
DETOXIFY_MODEL=original  # original/unbiased/multilingual

# Whisper ASR
WHISPER_MODEL=small  # tiny/base/small/medium/large

# OCR
OCR_LANGUAGES=en,sw  # Comma-separated language codes

#############################################
# PERFORMANCE
#############################################
PARALLEL_DETECTORS=true
MAX_WORKERS=4
WORKER_TIMEOUT=300

#############################################
# MONITORING & METRICS
#############################################
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_ENABLED=false

#############################################
# NOTIFICATIONS
#############################################
NOTIFY_ON_CRITICAL=true
NOTIFY_ON_REVIEW=false
ADMIN_EMAIL=admin@adsphere.com
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

#############################################
# EXTERNAL SERVICES
#############################################
# If you want to use external moderation APIs as fallback
EXTERNAL_MODERATION_API_URL=
EXTERNAL_MODERATION_API_KEY=
ENABLE_EXTERNAL_FALLBACK=false

#############################################
# SECURITY
#############################################
SECRET_KEY=change-this-to-a-random-secret-key-in-production
ALLOWED_HOSTS=localhost,127.0.0.1,moderation
ENABLE_CSRF_PROTECTION=true
SESSION_TIMEOUT_MINUTES=60

#############################################
# DATABASE (for future use)
#############################################
DATABASE_URL=sqlite:///./moderation.db
# DATABASE_URL=postgresql://user:password@localhost/moderation_db

#############################################
# SENTRY (Error Tracking - Optional)
#############################################
SENTRY_DSN=
ENABLE_SENTRY=false

#############################################
# FEATURE FLAGS
#############################################
ENABLE_VIDEO_MODERATION=true
ENABLE_IMAGE_MODERATION=true
ENABLE_TEXT_MODERATION=true
ENABLE_REALTIME_MODERATION=true
ENABLE_OCR=true
ENABLE_ASR=true

